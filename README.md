# Instagram不動産投稿半自動作成アプリ（ウェブ版）

物件画像にAIで生成したPR文を自動配置し、効果的なInstagram投稿画像を作成するWebアプリケーションです。

## 🚀 機能

### 現在実装済み
- ✅ 画像アップロード（ドラッグ&ドロップ対応）
- ✅ 物件情報入力
- ✅ AI PR文自動生成（OpenAI API）
- ✅ PR文インライン編集機能
- ✅ **投稿テキスト・ハッシュタグ自動生成**
- ✅ **プロンプト設定カスタマイズ機能**
- ✅ **プロンプトテンプレートシステム**
- ✅ ステップバイステップのナビゲーション
- ✅ 状態管理（Zustand）
- ✅ レスポンシブデザイン（Tailwind CSS）

### 実装予定
- 🔄 テキストレイアウト選択
- 🔄 フォントサイズ・位置調整
- 🔄 画像編集・プレビュー
- 🔄 完成画像ダウンロード

## 🛠 技術スタック

- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **状態管理**: Zustand
- **AI**: OpenAI API (GPT-3.5-turbo)
- **画像処理**: HTML5 Canvas API
- **アイコン**: Lucide React

## 📦 セットアップ

### 必要な環境
- Node.js 18以上
- npm または yarn

### インストール

1. リポジトリをクローン
```bash
git clone <repository-url>
cd instapost
```

2. 依存関係をインストール
```bash
npm install --legacy-peer-deps
```

3. 環境変数を設定
```bash
# .env.localファイルを作成
OPENAI_API_KEY=your_openai_api_key_here
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

4. 開発サーバーを起動
```bash
npm run dev
```

5. ブラウザで http://localhost:3000 にアクセス

## 📁 プロジェクト構造

```
src/
├── app/                    # Next.js App Router
│   ├── page.tsx           # メインページ
│   └── layout.tsx         # ルートレイアウト
├── components/            # Reactコンポーネント
│   ├── ImageUploader.tsx  # 画像アップロード
│   ├── PropertyTextInput.tsx # 物件情報入力
│   ├── StepNavigation.tsx # ステップナビゲーション
│   └── FontSizeSlider.tsx # フォントサイズ調整
├── lib/                   # ユーティリティ関数
│   ├── openai.ts         # OpenAI API
│   ├── image-processing.ts # 画像処理
│   └── layouts.ts        # レイアウト定義
├── store/                 # 状態管理
│   └── app-store.ts      # Zustandストア
└── types/                 # TypeScript型定義
    └── index.ts
```

## 🔧 使用方法

1. **画像アップロード**: 物件画像をドラッグ&ドロップまたはファイル選択でアップロード
2. **物件情報入力**: 物件の詳細情報をテキストエリアに入力
3. **PR文生成**: AIが物件情報から魅力的なPR文を自動生成
4. **画像編集**: テキストの配置・サイズ・レイアウトを調整
5. **ダウンロード**: 完成した画像をダウンロード

## 🎨 機能詳細

### ステップ1: 画像アップロード
- 対応形式: JPEG, PNG, WebP
- 最大ファイルサイズ: 10MB
- 最大枚数: 10枚
- Instagram推奨サイズ（1080x1080）に自動リサイズ

### ステップ2: 物件情報入力
- サンプルテキスト提供
- 文字数制限: 2,000文字
- リアルタイム文字数表示

### ステップ3: PR文生成
- OpenAI GPT-3.5-turboによる自動生成
- カテゴリ別分類（立地、価格、設備、仕様、アピール、**概要**等）
- 重要度スコア付き（1-5星評価）
- 20種類程度のPR文を一括生成
- **物件概要情報の自動生成**: 物件種別・面積・価格・間取りをリスト形式で必ず生成
- **インライン編集機能**: 生成されたPR文をその場で編集可能
  - クリックまたは編集ボタンで編集モード切り替え
  - Enter キーで保存、Escape キーでキャンセル
  - リアルタイム文字数表示
- **プロンプト設定カスタマイズ**: 表現調整機能
  - **表現トーン**: 丁寧/カジュアル/プロフェッショナル/フレンドリー
  - **表現スタイル**: 詳細/簡潔/クリエイティブ/事実重視
  - **ターゲット層**: ファミリー/投資家/若年層/シニア/一般層
  - **重点項目**: 立地/価格/設備機能/投資価値/ライフスタイル
  - **プリセットテンプレート**: 4種類の専用テンプレート
  - **カスタムテンプレート**: 独自プロンプトの作成機能
- 高優先度PR文と**概要情報の自動選択**

### ステップ3.5: 投稿テキスト・ハッシュタグ生成
- **投稿キャプション自動生成**: 2-3個のInstagram投稿用キャプション（300文字以内）
- **ハッシュタグ自動生成**: カテゴリ別ハッシュタグの提案
  - **立地関連**: #駅近 #好立地 #アクセス良好 等
  - **物件関連**: #新築 #マンション #一戸建て 等
  - **ライフスタイル**: #住まい探し #新生活 #マイホーム 等
  - **一般**: #不動産 #物件情報 #内見 等
- **インライン編集機能**: キャプションの直接編集
- **ワンクリックコピー**: キャプション+ハッシュタグの一括コピー
- **ハッシュタグライブラリ**: カテゴリ別ハッシュタグの管理・選択

### ステップ4: 画像編集（実装予定）
- プリセットレイアウト選択
- フォントサイズ調整（12-72px）
- テキスト位置のドラッグ操作
- リアルタイムプレビュー

### ステップ5: ダウンロード（実装予定）
- 高品質JPEG出力
- 投稿用テキスト・ハッシュタグ生成
- 一括ダウンロード機能

## 🔑 環境変数

```bash
# OpenAI API（必須）
OPENAI_API_KEY=sk-...

# アプリケーション設定
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_MAX_FILE_SIZE=10485760
NEXT_PUBLIC_SESSION_TIMEOUT=3600000

# データベース（将来用）
DATABASE_URL="file:./dev.db"
```

## 🐛 既知の問題

- react-windowパッケージのピア依存関係の警告（機能には影響なし）
- OpenAI APIキーが未設定の場合のエラーハンドリング

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🤝 貢献

プルリクエストや課題報告をお待ちしています！

---

開発者: Assistant
最終更新: 2024年12月
